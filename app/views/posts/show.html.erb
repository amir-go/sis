<h1 class="blocktitle"><%= @post.title %></h1>

<div class="panel panel-default">
  <div class="panel-heading">
    <small>Posted at: <%= @post.created_at.strftime("%d.%-m.%Y %H:%M") %> | Posted by: <%= @post.user.full_name %></small>
    <small class="pull-right">Comments: <%= @post.comments.count %></small>
  </div>

  <div class="panel-body">
    <%= @post.description %>
  </div>
</div>

<button type="button" class="btn btn-primary btn-sm pull-right" data-toggle="modal" data-target="#myModal">Leave Comment</button>

<h1 class="blocktitle">Comments</h1>

<div class="row">
	<div class="col-md-6" id="post-comments">
		<% @post.comments.order(created_at: :desc).each do |comment| %>
			<div class="comment panel panel-default" style="padding: 10px; margin-bottom: 10px;">
				<h4><%= current_user.full_name %> <small class="pull-right"><%= comment.created_at.strftime("%d.%-m.%Y %H:%M") %></small>	</h4><hr>
				<p><%= comment.content %></p>
			</div>
		<% end %>
	</div>
</div>

<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

  	<%= form_tag comments_path, method: :post, remote: true do %>

	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Modal Header</h4>
	      </div>
	      <div class="modal-body">
	        
	      <div class="err"></div>

	      	<div class="form-group">
	      		<%= label_tag 'Comment', nil, class: 'control-label' %>
	      		<%= text_area_tag :content, nil, class: 'form-control' %>
	      	</div>

	      	<div class="form-group">
	      		<%= hidden_field_tag :post_id, @post.id %>
	      	</div>

	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	        <%= submit_tag 'Save', class: 'btn btn-primary' %>
	      </div>
	    </div>

	   <% end %>

  </div>
</div>